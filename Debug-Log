2025-11-26 13:11:20,898 [INFO] [FaceDetectionWorker] Complete in 7.1s: 15 processed (15 with faces), 0 skipped, 20 faces detected, 0 failed
[FaceDetection] Complete: 15 photos, 20 faces detected
2025-11-26 13:11:20,898 [INFO] [FaceClusterWorker] Starting face clustering for project 1
[FaceCluster] Loading face embeddings...
2025-11-26 13:11:20,898 [INFO] [FaceClusterWorker] Loaded 20 face embeddings
[FaceCluster] Clustering 20 faces...
2025-11-26 13:11:20,914 [INFO] [FaceClusterWorker] Found 4 clusters
2025-11-26 13:11:20,914 [INFO] [FaceClusterWorker] Found 8 unclustered faces (will create 'Unidentified' branch)
[FaceCluster] Found 4 person groups...
2025-11-26 13:11:20,914 [INFO] [FaceClusterWorker] Cluster 0 ‚Üí 4 faces
[FaceCluster] Saving cluster 1/4: Person 1 (4 faces)
2025-11-26 13:11:20,914 [INFO] [FaceClusterWorker] Cluster 1 ‚Üí 2 faces
[FaceCluster] Saving cluster 2/4: Person 2 (2 faces)
2025-11-26 13:11:20,929 [INFO] [FaceClusterWorker] Cluster 2 ‚Üí 2 faces
[FaceCluster] Saving cluster 3/4: Person 3 (2 faces)
2025-11-26 13:11:20,930 [INFO] [FaceClusterWorker] Cluster 3 ‚Üí 4 faces
[FaceCluster] Saving cluster 4/4: Person 4 (4 faces)
[FaceCluster] Processing 8 unidentified faces...
2025-11-26 13:11:20,930 [INFO] [FaceClusterWorker] Created 'Unidentified' branch with 8 faces from 5 photos
2025-11-26 13:11:21,013 [INFO] [FaceClusterWorker] Complete in 0.1s: 4 person clusters + 8 unidentified faces
[FaceCluster] Clustering complete: 5 branches created
[FaceCluster] Complete: 4 person groups created
[SidebarQt] reload() blocked - widget not visible (likely being deleted)
[GooglePhotosLayout] Section header clicked - clearing all filters
[GooglePhotosLayout] Loading photos from database (thumb size: 200px)...
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1]
[GooglePhotosLayout] üë• Querying face_branch_reps for project_id=1
[GooglePhotosLayout] üë• Found 5 face clusters
[GooglePhotosLayout]   - face_unidentified: Unnamed (b'\x08\x00\x00\x00' photos)
[GooglePhotosLayout]   - face_000: Unnamed (4 photos)
[GooglePhotosLayout]   - face_003: Unnamed (4 photos)
[GooglePhotosLayout]   - face_001: Unnamed (2 photos)
[GooglePhotosLayout]   - face_002: Unnamed (2 photos)
[GooglePhotosLayout] Loaded 8 photos in 6 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_unidentified)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_unidentified]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_unidentified
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 20 total entries, 5 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_unidentified' has 8 face crops across 5 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_unidentified: 8 crops
[GooglePhotosLayout]   - face_000: 4 crops
[GooglePhotosLayout]   - face_003: 4 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_002: 2 crops
[GooglePhotosLayout] üîç DEBUG: Sample image_path from face_crops for face_unidentified (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar1_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/img_6850_2_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Sample pm.path from photo_metadata (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_3_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya2_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Checking if 'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg' is in project_images:
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout] üîç DEBUG: 5 out of 5 face_crop paths are actually in project_images for project 1
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_unidentified']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_unidentified
[GooglePhotosLayout] Loaded 3 photos in 3 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_000)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_000]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_000
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 20 total entries, 5 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_000' has 4 face crops across 4 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_unidentified: 8 crops
[GooglePhotosLayout]   - face_000: 4 crops
[GooglePhotosLayout]   - face_003: 4 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_002: 2 crops
[GooglePhotosLayout] üîç DEBUG: Sample image_path from face_crops for face_000 (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_3_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya2_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ÿπŸÑŸäÿß_2_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Sample pm.path from photo_metadata (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_3_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya2_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Checking if 'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg' is in project_images:
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout] üîç DEBUG: 4 out of 4 face_crop paths are actually in project_images for project 1
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_000']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_000
[GooglePhotosLayout] Loaded 4 photos in 2 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_003)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_003]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_003
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 20 total entries, 5 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_003' has 4 face crops across 4 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_unidentified: 8 crops
[GooglePhotosLayout]   - face_000: 4 crops
[GooglePhotosLayout]   - face_003: 4 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_002: 2 crops
[GooglePhotosLayout] üîç DEBUG: Sample image_path from face_crops for face_003 (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar-ref(1)_2_2.png'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar-ref_2_2_2.png'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar-ref_3_2.png'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/img_6995_2_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Sample pm.path from photo_metadata (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_3_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya2_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Checking if 'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar-ref(1)_2_2.png' is in project_images:
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout] üîç DEBUG: 4 out of 4 face_crop paths are actually in project_images for project 1
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_003']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_003
[GooglePhotosLayout] Loaded 1 photos in 1 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_001)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_001]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_001
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 20 total entries, 5 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_001' has 2 face crops across 2 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_unidentified: 8 crops
[GooglePhotosLayout]   - face_000: 4 crops
[GooglePhotosLayout]   - face_003: 4 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_002: 2 crops
[GooglePhotosLayout] üîç DEBUG: Sample image_path from face_crops for face_001 (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar3_2_2_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Sample pm.path from photo_metadata (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_3_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya2_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Checking if 'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg' is in project_images:
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout] üîç DEBUG: 2 out of 2 face_crop paths are actually in project_images for project 1
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_001']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_001
[GooglePhotosLayout] No photos found in project 1
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_002)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_002]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_002
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 20 total entries, 5 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_002' has 2 face crops across 2 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_unidentified: 8 crops
[GooglePhotosLayout]   - face_000: 4 crops
[GooglePhotosLayout]   - face_003: 4 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_002: 2 crops
[GooglePhotosLayout] üîç DEBUG: Sample image_path from face_crops for face_002 (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Sample pm.path from photo_metadata (first 5):
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_3_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya2_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya3_2_2_2_2.jpeg'
[GooglePhotosLayout]     'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2.jpeg'
[GooglePhotosLayout] üîç DEBUG: Checking if 'c:/users/suleimaa/downloads/photo-sorter/images/output6/alya_2_2.jpeg' is in project_images:
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout]     ‚úÖ Found in project_images: project_id=1
[GooglePhotosLayout] üîç DEBUG: 2 out of 2 face_crop paths are actually in project_images for project 1
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_002']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_002
[GooglePhotosLayout] No photos found in project 1
