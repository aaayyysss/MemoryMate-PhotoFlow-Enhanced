2025-11-26 13:50:03,516 [INFO] [FaceDetectionWorker] Complete in 7.2s: 15 processed (15 with faces), 0 skipped, 20 faces detected, 0 failed
[FaceDetection] Complete: 15 photos, 20 faces detected
2025-11-26 13:50:03,516 [INFO] [FaceClusterWorker] Starting face clustering for project 1
[FaceCluster] Loading face embeddings...
2025-11-26 13:50:03,516 [INFO] [FaceClusterWorker] Loaded 20 face embeddings
[FaceCluster] Clustering 20 faces...
2025-11-26 13:50:03,548 [INFO] [FaceClusterWorker] Found 4 clusters
2025-11-26 13:50:03,548 [INFO] [FaceClusterWorker] Found 8 unclustered faces (will create 'Unidentified' branch)
[FaceCluster] Found 4 person groups...
2025-11-26 13:50:03,561 [INFO] [FaceClusterWorker] Cluster 0 ‚Üí 4 faces
[FaceCluster] Saving cluster 1/4: Person 1 (4 faces)
2025-11-26 13:50:03,561 [INFO] [FaceClusterWorker] Cluster 1 ‚Üí 2 faces
[FaceCluster] Saving cluster 2/4: Person 2 (2 faces)
2025-11-26 13:50:03,561 [INFO] [FaceClusterWorker] Cluster 2 ‚Üí 2 faces
[FaceCluster] Saving cluster 3/4: Person 3 (2 faces)
2025-11-26 13:50:03,564 [INFO] [FaceClusterWorker] Cluster 3 ‚Üí 4 faces
[FaceCluster] Saving cluster 4/4: Person 4 (4 faces)
[FaceCluster] Processing 8 unidentified faces...
2025-11-26 13:50:03,564 [INFO] [FaceClusterWorker] Created 'Unidentified' branch with 8 faces from 5 photos
2025-11-26 13:50:03,570 [INFO] [FaceClusterWorker] Complete in 0.1s: 4 person clusters + 8 unidentified faces
[FaceCluster] Clustering complete: 5 branches created
[FaceCluster] Complete: 4 person groups created
[SidebarQt] reload() called, display_mode=list, tabs_visible=False
[SidebarQt] Calling _build_tree_model() instead of tabs refresh
[SidebarQt] _build_tree_model() called with project_id=1
[Sidebar] Detaching old model from tree view
[Sidebar] Pending events processed (skipped explicit processEvents)
[Sidebar] Creating fresh model (avoiding Qt segfault)
[Sidebar] Attaching fresh model to tree view
[SidebarQt] list_branches() returned 1 branches
[SidebarQt] Sample branches: [{'branch_key': 'all', 'display_name': 'üìÅ All Photos', 'count': 15}]
[Sidebar] Loaded 2 folder counts in batch (performance optimization)
[Sidebar] Loaded date counts in batch: 2 years, 5 months, 9 days
[Sidebar] Loading videos for project_id=1
[Sidebar] Found 0 videos in project 1

[Sidebar] ===== Initiating mobile device scan from sidebar =====
[Sidebar] Database: <reference_db.ReferenceDB object at 0x00000227F2245550>
[Sidebar] Register devices: True

[DeviceScanner] ===== Starting device scan  =====
[DeviceScanner] Platform: Windows
[DeviceScanner] Database registration: enabled
[DeviceScanner] Scanning Windows drives...
[DeviceScanner]   Checking drive letters D:-Z:...
[DeviceScanner]     Drive H: exists, checking...
[DeviceScanner]           Checking path: H:\
[DeviceScanner]           Directories found: []
[DeviceScanner]           Has DCIM folder: False
[DeviceScanner]           No alternate structure found
[DeviceScanner]           Checking subdirectories for DCIM (MTP mounts)...
[DeviceScanner]           REJECTED: No DCIM or alternate structure
[DeviceScanner]       ‚úó No device on drive H:
[DeviceScanner]     Drive P: exists, checking...
[DeviceScanner]           Checking path: P:\
[DeviceScanner]           Directories found: ['ALT', 'ALT2', 'ALT3', 'CITRIX', 'CONFIDENTIAL', 'GLOBAL', 'HOME', 'PROJECTS1', 'PROJECTS2', 'PROJECTS3', 'PROJECTS4', 'PROJECTS5', 'PROJECTS6', 'PROJECTS7']
[DeviceScanner]           Has DCIM folder: False
[DeviceScanner]           No alternate structure found
[DeviceScanner]           Checking subdirectories for DCIM (MTP mounts)...
[DeviceScanner]           REJECTED: No DCIM or alternate structure
[DeviceScanner]       ‚úó No device on drive P:
[DeviceScanner]   Checking portable devices (MTP/PTP)...
[DeviceScanner]     Attempting Shell COM enumeration...
[DeviceScanner]     COM initialized for current thread
[DeviceScanner]     Found 3 items under 'This PC'
[DeviceScanner]       ‚Üí Item: '(C:) Lokaler Datentr√§ger' | IsFolder=True | IsFileSystem=True
[DeviceScanner]       ‚Üí Item: '(H:) SULEIMAA (\\ACCOUNTS.INTERN\SHARES\HOME)' | IsFolder=True | IsFileSystem=True
[DeviceScanner]       ‚Üí Item: '(P:) SHARES (\\ACCOUNTS.INTERN)' | IsFolder=True | IsFileSystem=True
[DeviceScanner]     COM uninitialized
[DeviceScanner] ===== Scan complete: 0 device(s) found =====
[DeviceScanner] Results cached for 5.0s

[Sidebar] ===== Scan complete: 0 mobile device(s) found =====
[Sidebar]   ‚úó No devices found
[Sidebar] ===== End device scan =====

[Sidebar] No mobile devices detected - added help message
[Sidebar] starting async count population for 1 branch targets
[Sidebar][counts worker gen=8] running for 1 targets...
[Sidebar][counts worker gen=8] finished scanning targets, scheduling UI update
[Sidebar][counts applied] updated UI with counts
[LayoutManager] Switching layout: current ‚Üí google
[LayoutManager] üíæ Took ownership of original central widget: QWidget
[GooglePhotosLayout] Using default project: 1
[GooglePhotosLayout] ‚úÖ Create Project button connected in toolbar creation
[GooglePhotosLayout] Project selector populated with 1 projects
[GooglePhotosLayout] Loading photos from database (thumb size: 200px)...
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?
                    AND pm.date_taken IS NOT NULL

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1]
[GooglePhotosLayout] üë• Querying face_branch_reps for project_id=1
[GooglePhotosLayout] üë• Found 5 face clusters
[GooglePhotosLayout]   - face_unidentified: Unnamed (b'\x08\x00\x00\x00' photos)
[GooglePhotosLayout]   - face_000: Unnamed (4 photos)
[GooglePhotosLayout]   - face_003: Unnamed (4 photos)
[GooglePhotosLayout]   - face_001: Unnamed (2 photos)
[GooglePhotosLayout]   - face_002: Unnamed (2 photos)
[GooglePhotosLayout] Loaded 8 photos in 6 date groups
[LayoutManager] Setting new central widget: QWidget
[GooglePhotosLayout] üìç Layout activated
[GooglePhotosLayout] ‚úì Connected Scan button
[GooglePhotosLayout] ‚úì Connected Faces button
[LayoutManager] ‚úì Switched to: Google Photos Style
[MainWindow] ‚úì Switched to layout: google
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_unidentified)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_unidentified]...
[GooglePhotosLayout] Filtering by person: face_unidentified
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_unidentified']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_unidentified
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 5 photos in 3 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_000)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_000]...
[GooglePhotosLayout] Filtering by person: face_000
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_000']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_000
[GooglePhotosLayout] Loaded 4 photos in 2 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_003)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_003]...
[GooglePhotosLayout] Filtering by person: face_003
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_003']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_003
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 4 photos in 1 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_001)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_001]...
[GooglePhotosLayout] Filtering by person: face_001
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_001']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_001
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 2 photos in 0 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_002)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_002]...
[GooglePhotosLayout] Filtering by person: face_002
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_002']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_002
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 2 photos in 0 date groups
[GooglePhotosLayout] Section header clicked - clearing all filters
[GooglePhotosLayout] Loading photos from database (thumb size: 200px)...
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?
                    AND pm.date_taken IS NOT NULL

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1]
[GooglePhotosLayout] üë• Querying face_branch_reps for project_id=1
[GooglePhotosLayout] üë• Found 5 face clusters
[GooglePhotosLayout]   - face_unidentified: Unnamed (b'\x08\x00\x00\x00' photos)
[GooglePhotosLayout]   - face_000: Unnamed (4 photos)
[GooglePhotosLayout]   - face_003: Unnamed (4 photos)
[GooglePhotosLayout]   - face_001: Unnamed (2 photos)
[GooglePhotosLayout]   - face_002: Unnamed (2 photos)
[GooglePhotosLayout] Loaded 8 photos in 6 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_002)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_002]...
[GooglePhotosLayout] Filtering by person: face_002
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_002']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_002
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 2 photos in 0 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_001)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_001]...
[GooglePhotosLayout] Filtering by person: face_001
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_001']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_001
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 2 photos in 0 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_003)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_003]...
[GooglePhotosLayout] Filtering by person: face_003
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_003']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_003
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 4 photos in 1 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_000)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_000]...
[GooglePhotosLayout] Filtering by person: face_000
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_000']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_000
[GooglePhotosLayout] Loaded 4 photos in 2 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_unidentified)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_unidentified]...
[GooglePhotosLayout] Filtering by person: face_unidentified
[GooglePhotosLayout] üîç SQL Query:

                    SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                    FROM photo_metadata pm
                    JOIN project_images pi ON pm.path = pi.image_path
                    WHERE pi.project_id = ?


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_unidentified']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_unidentified
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Error parsing date 'None': 'NoneType' object has no attribute 'strftime'
[GooglePhotosLayout] Loaded 5 photos in 3 date groups
[Shutdown] Grid threads shut down.
[ThumbnailManager] Thread pool shut down.
[Shutdown] ThumbnailManager threads shut down.
[Shutdown] Thumbnail cache cleared.
[Main] Qt event loop exited with code: 0
[ThumbCacheDB] Closing cache gracefully...

C:\Users\suleimaa\Downloads\Photo-Sorter\09.38.01.01-Photo-App\MemoryMate-PhotoFlow-Enhanced-main-04>
