[FaceDetection] Complete: 21 photos, 33 faces detected
2025-11-26 02:40:56,768 [INFO] [FaceClusterWorker] Starting face clustering for project 1
[FaceCluster] Loading face embeddings...
2025-11-26 02:40:56,773 [INFO] [FaceClusterWorker] Loaded 33 face embeddings
[FaceCluster] Clustering 33 faces...
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Found 12 clusters
[FaceCluster] Found 12 person groups...
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Cluster 0 ‚Üí 8 faces
[FaceCluster] Saving cluster 1/12: Person 1 (8 faces)
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Cluster 1 ‚Üí 2 faces
[FaceCluster] Saving cluster 2/12: Person 2 (2 faces)
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Cluster 2 ‚Üí 3 faces
[FaceCluster] Saving cluster 3/12: Person 3 (3 faces)
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Cluster 3 ‚Üí 1 faces
[FaceCluster] Saving cluster 4/12: Person 4 (1 faces)
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Cluster 4 ‚Üí 3 faces
[FaceCluster] Saving cluster 5/12: Person 5 (3 faces)
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Cluster 5 ‚Üí 1 faces
[FaceCluster] Saving cluster 6/12: Person 6 (1 faces)
2025-11-26 02:40:56,778 [INFO] [FaceClusterWorker] Cluster 6 ‚Üí 7 faces
[FaceCluster] Saving cluster 7/12: Person 7 (7 faces)
2025-11-26 02:40:56,788 [INFO] [FaceClusterWorker] Cluster 7 ‚Üí 1 faces
[FaceCluster] Saving cluster 8/12: Person 8 (1 faces)
[FaceCluster] Saving cluster 9/12: Person 9 (1 faces)
2025-11-26 02:40:56,790 [INFO] [FaceClusterWorker] Cluster 8 ‚Üí 1 faces
2025-11-26 02:40:56,790 [INFO] [FaceClusterWorker] Cluster 9 ‚Üí 2 faces
[FaceCluster] Saving cluster 10/12: Person 10 (2 faces)
2025-11-26 02:40:56,790 [INFO] [FaceClusterWorker] Cluster 10 ‚Üí 1 faces
[FaceCluster] Saving cluster 11/12: Person 11 (1 faces)
2025-11-26 02:40:56,790 [INFO] [FaceClusterWorker] Cluster 11 ‚Üí 3 faces
[FaceCluster] Saving cluster 12/12: Person 12 (3 faces)
2025-11-26 02:40:56,799 [INFO] [FaceClusterWorker] Complete in 0.0s: 12 person clusters + 0 unidentified faces
[FaceCluster] Clustering complete: 12 branches created
[FaceCluster] Complete: 12 person groups created
[SidebarQt] reload() called, display_mode=list, tabs_visible=False
[SidebarQt] Calling _build_tree_model() instead of tabs refresh
[SidebarQt] _build_tree_model() called with project_id=1
[Sidebar] Detaching old model from tree view
[Sidebar] Pending events processed (skipped explicit processEvents)
[Sidebar] Creating fresh model (avoiding Qt segfault)
[Sidebar] Attaching fresh model to tree view
[SidebarQt] list_branches() returned 1 branches
[SidebarQt] Sample branches: [{'branch_key': 'all', 'display_name': 'üìÅ All Photos', 'count': 21}]
[Sidebar] Loaded 6 folder counts in batch (performance optimization)
[Sidebar] Loaded date counts in batch: 5 years, 8 months, 15 days
[Sidebar] Loading videos for project_id=1
[Sidebar] Found 0 videos in project 1

[Sidebar] ===== Initiating mobile device scan from sidebar =====
[Sidebar] Database: <reference_db.ReferenceDB object at 0x000001DBB3A2ABF0>
[Sidebar] Register devices: True

[DeviceScanner] ===== Starting device scan  =====
[DeviceScanner] Platform: Windows
[DeviceScanner] Database registration: enabled
[DeviceScanner] Scanning Windows drives...
[DeviceScanner]   Checking drive letters D:-Z:...
[DeviceScanner]     Drive D: exists, checking...
[DeviceScanner]           Checking path: D:\
[DeviceScanner]           Directories found: ['$RECYCLE.BIN', 'Architect Books', 'Architecture', 'Arshiif', 'B2 Pr√ºfung', 'CORONA', 'CORONA 1', 'CORONA 2024', 'En', 'From Ammar', 'IPhone', 'MirrorTo transfer', 'MirrorTo video', 'My Phone', 'My Work', 'New folder (2)', 'Python', 'Recovery', 'REVIT', 'Revit Advance', 'REVIT NEW', 'Samer Matar V-Ray', 'SnapPea', 'System Volume Information', 'To write', 'training 2020', 'Workshop- Corona', 'ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸä', 'ÿßŸÜŸÉŸÑŸäÿ≤Ÿä', 'ÿ™ÿµŸàŸäÿ§Ÿä', 'ÿ™ŸÑÿ∫ÿ±ÿßŸÖ', 'ÿ±ŸàÿßŸäÿßÿ™', 'ÿµŸàÿ± ŸÑŸÑÿ•ÿ±ÿ≥ÿßŸÑ', 'ÿ∑Ÿäÿ±ÿßŸÜ ŸÖÿØŸÜŸä', 'ÿπÿ≤ŸÅŸä', 'ŸÅŸäÿØŸäŸà', 'ŸÉŸàÿ±ÿ≥ ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿä- ŸáŸäÿ¶ÿ© ÿßŸÑÿ™ÿÆÿ∑Ÿäÿ∑ ŸàÿßŸÑÿ™ÿπÿßŸàŸÜ ÿßŸÑÿØŸàŸÑŸä', 'ŸÑŸÑÿ∑ÿ®ÿßÿπÿ©', 'ŸÖŸÑŸÅÿßÿ™Ÿä']
[DeviceScanner]           Has DCIM folder: False
[DeviceScanner]           No alternate structure found
[DeviceScanner]           Checking subdirectories for DCIM (MTP mounts)...
[DeviceScanner]             Checking subdirectory: IPhone
[DeviceScanner]               Checking nested: IPhone/202202__
[DeviceScanner]               Checking nested: IPhone/242CLOUD
[DeviceScanner]               Checking nested: IPhone/Family
[DeviceScanner]               Checking nested: IPhone/French Video
[DeviceScanner]               Checking nested: IPhone/To draw
[DeviceScanner]               Checking nested: IPhone/To learn Deutsch
[DeviceScanner]               Checking nested: IPhone/ÿÆŸàÿßÿ∑ÿ±
[DeviceScanner]               Checking nested: IPhone/ÿπŸÜ ÿßŸÑŸÖŸàÿ™
[DeviceScanner]               Checking nested: IPhone/ŸÖŸÜÿ≤ŸÑ ÿπŸÖÿßÿ± Ÿàÿ≥Ÿàÿ≤Ÿä
[DeviceScanner]             Checking subdirectory: My Phone
[DeviceScanner]               Checking nested: My Phone/Android
[DeviceScanner]               Checking nested: My Phone/DCM
[DeviceScanner]               Checking nested: My Phone/Document Scanner
[DeviceScanner]               Checking nested: My Phone/Final
[DeviceScanner]               ‚úì Found DCIM in: My Phone/Final/DCIM
[DeviceScanner]           Has DCIM in subdirectory: True
[DeviceScanner]           Device type: android
[DeviceScanner]           Device label: ü§ñ Mobile Device
[DeviceScanner]           Scanning for media folders...
[DeviceScanner]           Found 0 media folder(s)
[DeviceScanner]           REJECTED: No media folders with photos/videos
[DeviceScanner]       ‚úó No device on drive D:
[DeviceScanner]   Checking portable devices (MTP/PTP)...
[DeviceScanner]     Attempting Shell COM enumeration...
[DeviceScanner]     COM initialized for current thread
[DeviceScanner]     Found 3 items under 'This PC'
[DeviceScanner]       ‚Üí Item: 'Manage my phone' | IsFolder=False | IsFileSystem=False
[DeviceScanner]       ‚Üí Item: 'Local Disk (C:)' | IsFolder=True | IsFileSystem=True
[DeviceScanner]       ‚Üí Item: 'DATA (D:)' | IsFolder=True | IsFileSystem=True
[DeviceScanner]     COM uninitialized
[DeviceScanner] ===== Scan complete: 0 device(s) found =====
[DeviceScanner] Results cached for 5.0s

[Sidebar] ===== Scan complete: 0 mobile device(s) found =====
[Sidebar]   ‚úó No devices found
[Sidebar] ===== End device scan =====

[Sidebar] No mobile devices detected - added help message
[Sidebar] starting async count population for 1 branch targets
[Sidebar][counts worker gen=8] running for 1 targets...
[Sidebar][counts worker gen=8] finished scanning targets, scheduling UI update
[Sidebar][counts applied] updated UI with counts
[LayoutManager] Switching layout: current ‚Üí google
[LayoutManager] üíæ Took ownership of original central widget: QWidget
[GooglePhotosLayout] Using default project: 1
[GooglePhotosLayout] ‚úÖ Create Project button connected in toolbar creation
[GooglePhotosLayout] Project selector populated with 1 projects
[GooglePhotosLayout] Loading photos from database (thumb size: 200px)...
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1]
[GooglePhotosLayout] üë• Querying face_branch_reps for project_id=1
[GooglePhotosLayout] üë• Found 10 face clusters
[GooglePhotosLayout]   - face_000: Unnamed (8 photos)
[GooglePhotosLayout]   - face_006: Unnamed (7 photos)
[GooglePhotosLayout]   - face_002: Unnamed (3 photos)
[GooglePhotosLayout]   - face_004: Unnamed (3 photos)
[GooglePhotosLayout]   - face_011: Unnamed (3 photos)
[GooglePhotosLayout]   - face_001: Unnamed (2 photos)
[GooglePhotosLayout]   - face_009: Unnamed (2 photos)
[GooglePhotosLayout]   - face_003: Unnamed (1 photos)
[GooglePhotosLayout]   - face_005: Unnamed (1 photos)
[GooglePhotosLayout]   - face_007: Unnamed (1 photos)
[GooglePhotosLayout] Loaded 13 photos in 7 date groups
[LayoutManager] Setting new central widget: QWidget
[GooglePhotosLayout] üìç Layout activated
[GooglePhotosLayout] ‚úì Connected Scan button
[GooglePhotosLayout] ‚úì Connected Faces button
[LayoutManager] ‚úì Switched to: Google Photos Style
[MainWindow] ‚úì Switched to layout: google
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_000)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_000]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_000
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_000' has 8 face crops across 8 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_000']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_000
[GooglePhotosLayout] No photos found in project 1
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_006)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_006]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_006
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_006' has 7 face crops across 7 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_006']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_006
[GooglePhotosLayout] Loaded 6 photos in 4 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_002)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_002]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_002
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_002' has 3 face crops across 3 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_002']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_002
[GooglePhotosLayout] Loaded 1 photos in 1 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_004)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_004]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_004
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_004' has 3 face crops across 3 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_004']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_004
[GooglePhotosLayout] Loaded 1 photos in 1 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_011)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_011]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_011
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_011' has 3 face crops across 3 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_011']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_011
[GooglePhotosLayout] Loaded 3 photos in 1 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_001)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_001]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_001
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_001' has 2 face crops across 2 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_001']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_001
[GooglePhotosLayout] No photos found in project 1
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_009)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_009]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_009
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_009' has 2 face crops across 2 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_009']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_009
[GooglePhotosLayout] Loaded 2 photos in 1 date groups
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_003)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_003]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_003
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_003' has 1 face crops across 1 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_003']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_003
[GooglePhotosLayout] No photos found in project 1
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_005)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_005]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_005
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_005' has 1 face crops across 1 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_005']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_005
[GooglePhotosLayout] No photos found in project 1
[GooglePhotosLayout] Filtering by person: Unnamed Person (branch_key=face_007)
[GooglePhotosLayout] Loading photos from database (thumb size: 200px) [person=face_007]...
[GooglePhotosLayout] üîç DEBUG: Entering person filter block for branch_key=face_007
[GooglePhotosLayout] üîç DEBUG: About to query face_crops table...
[GooglePhotosLayout] üîç DEBUG: face_crops has 33 total entries, 12 unique branch_keys for project 1
[GooglePhotosLayout] üîç DEBUG: branch_key='face_007' has 1 face crops across 1 unique images
[GooglePhotosLayout] üîç DEBUG: Available branch_keys in face_crops:
[GooglePhotosLayout]   - face_000: 8 crops
[GooglePhotosLayout]   - face_006: 7 crops
[GooglePhotosLayout]   - face_002: 3 crops
[GooglePhotosLayout]   - face_004: 3 crops
[GooglePhotosLayout]   - face_011: 3 crops
[GooglePhotosLayout]   - face_001: 2 crops
[GooglePhotosLayout]   - face_009: 2 crops
[GooglePhotosLayout]   - face_003: 1 crops
[GooglePhotosLayout]   - face_005: 1 crops
[GooglePhotosLayout]   - face_007: 1 crops
[GooglePhotosLayout] üîç SQL Query:

                SELECT DISTINCT pm.path, pm.date_taken, pm.width, pm.height
                FROM photo_metadata pm
                JOIN project_images pi ON pm.path = pi.image_path
                WHERE pi.project_id = ?
                AND pm.date_taken IS NOT NULL


                    AND pm.path IN (
                        SELECT DISTINCT image_path
                        FROM face_crops
                        WHERE project_id = ? AND branch_key = ?
                    )

ORDER BY pm.date_taken DESC
[GooglePhotosLayout] üîç Parameters: [1, 1, 'face_007']
[GooglePhotosLayout] üîç Person filter: project_id=1, branch_key=face_007
[GooglePhotosLayout] Loaded 1 photos in 1 date groups
